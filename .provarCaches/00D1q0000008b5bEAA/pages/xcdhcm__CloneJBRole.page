<apex:page standardController="xcdhcm__Job_Role__c" extensions="xcdhcm.JobRoleOverrideController" sidebar="false" showHeader="true" wizard="false" >
    <!-- 	<apex:stylesheet value="{!URLFOR($Resource.Css,'Employeesubpagecss.css')}" /> -->
    <apex:stylesheet value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/LiteEmployeeSub.css')}" />    
    <style>  
        .multiSelectPicklistTable tr:first-child
        {
        	display:none;
        }	  
        .bPageBlock .requiredInput .requiredBlock 
        {
        	display:none!important;
        }
        .bEditBlock .pbSubheader .pbSubExtra 
        {
        	display: none;
        }
        .Custom108Tab .tertiaryPalette, .individualPalette .Custom108Block .tertiaryPalette, .layoutEdit .individualPalette .Custom108Block .tertiaryPalette 
        {
	        background-color: #ccc;
	        border-color: #ccc;
	        padding: .75rem 1rem;
	        background: #f4f6f9;
	        border-radius: 4px;
	        color: #54698d!important;
	        font-size: 1.15em;
	        letter-spacing: .0625rem;
	        font-weight: 500;
        }
        body .bEditBlock .pbBody .pbSubheader, body .bWizardBlock .pbBody .pbSubheader
        {
	        font-size: 1.0em!important;
	        line-height: 1.25!important;
	        color: #54698d!important;
	        letter-spacing: .0625rem!important; 
	        font-weight: normal!important;
        }
        .closeIcon
        {
        	display:none;
        }
        input[type='text'] 
        {
        	width: 100%;
        }  
        textarea
        {
        	width:100%;
        } 
        select
        {
        	width:100%!important;
        }
        .popupBg
        {
	        //background-color:#FFFFFF;
	        opacity: 1.0;
	        filter: alpha(opacity = 60);
	        position: absolute;
	        width: 100%;
	        height: 100%;
	        top: 0;
	        left: 0;
	        z-index: 9998;
        }
        .customPopup
        {
	        line-height: 25px;
	        position: absolute;
	        left: 50%;
	        padding:10px;
	        z-index: 9999;
	        text-align: center;
	        top: 40%;
	        width: 500px;
	        margin-left: -250px;
	        text-decoration: none;
	        font-weight: bold;
	        
	        background: #ffffff !important;
	        border: 1px solid #ccc !important;
	        
	        -moz-box-shadow: 4px 5px 10px #99ccff;
	        -webkit-box-shadow: 4px 5px 10px #99ccff;
	        box-shadow: 4px 5px 10px #99ccff;
	        -webkit-border-radius: 5px;
	        -moz-border-radius: 5px;
	        color:#336699;
        }
        .bPageBlock .detailList tr td, .bPageBlock .detailList tr th, .hoverDetail .bPageBlock .detailList tr td, .hoverDetail .bPageBlock .detailList tr th 
        {
            border-bottom: white;
        }
        .multiSelectPicklistTable
        {
        	width: 200% !important;
        }
        .multiSelectPicklistTable .multiSelectPicklistRow .multiSelectPicklistCell 
        {
   			 width: 5.5% !important; 
    	}
    	.datePicker
        { 
		   margin-left:210px !important;
		   width: 21% !important;
		   position: sticky !important;    
		} 
		.leftArrowIcon , .rightArrowIcon
        {
             width: 32Px;
             height: 20px !important;
        }
		<!-- START :: 28/11/2018 NPPD-1809,NPPD-1862 modified by Ranjeet -->
		.lookupInput 
		{
			display: inline-table;
    		width: 100% !important;
		}
		.lookupInput img 
		{
			margin-right: 2em;
			margin-top: 10px;
		}
		<!-- END :: 28/11/2018 NPPD-1809,NPPD-1862 modified by Ranjeet -->
    </style>
    
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <head>
            <apex:slds />
        </head>
        <body class="slds-scope"> 
            <apex:form id="theFrm">
                <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal--large">
                    <div class="slds-modal__container">
                        <div class="slds-modal__header">
                            <apex:commandLink action="{!cancelChangeJobRoleRequest}" id="theCommandLink1" immediate="true" styleclass="slds-button slds-modal__close slds-button--icon-inverse">
                                <img src="{!URLFOR($Resource.XCD_static_resources,'Css/Lite/close.PNG')}" alt="Cancel" style="width: 67%;"/>
                            </apex:commandLink>
                            <h2 id="header43" class="slds-text-heading--medium">{!$Label.PHCloneJBRole}</h2>
                        </div>
                        <div class="slds-modal__content slds-p-around--medium"> 
                            <!-- ================================== Page content  ==========================================================    -->
                            <apex:pageBlock > 
                            	<!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
                            	<apex:outputPanel id="error">
                            		<apex:pageMessages escape="false"/>
                                	<apex:pageMessage summary="Please note this Employee's previous job role already has an Effective to date, and ensure it is consistent with the Effective from date of the new role." severity="warning" strength="3" rendered="{!showJrInfoEnddateMsg}"/> 
                                </apex:outputPanel>
                                <!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
                                
                                <apex:actionStatus id="wait">                   
                                    <apex:facet name="start">
                                        <div class="slds-spinner_container slds-show " style="top:10%; bottom:9%" >
                                            <div class="slds-spinner--brand slds-spinner slds-spinner--medium" aria-hidden="false" role="alert">
                                                <div class="slds-spinner__dot-a"></div>
                                                <div class="slds-spinner__dot-b"></div>
                                            </div>
                                        </div>
                                    </apex:facet>
                                    <apex:facet name="stop">
                                        <div class="slds-spinner_container slds-hide slds-is-fixed">
                                            <div class="slds-spinner--brand slds-spinner slds-spinner--medium" aria-hidden="false" role="alert">
                                                <div class="slds-spinner__dot-a"></div>
                                                <div class="slds-spinner__dot-b"></div>
                                            </div>
                                        </div>
                                    </apex:facet>                                
                                </apex:actionStatus>
                                
                                <!-- START :: 19-09-2018 NPPD-1674 P1 Summer2018 Hybrid Joiner Process Modified by Rahul S -->
                                <apex:pageBlockSection title="Post"  collapsible="false" rendered="{!DisplayPost}">
                                <!-- END :: 19-09-2018 NPPD-1674 P1 Summer2018 Hybrid Joiner Process Modified by Rahul S -->
                                    <apex:pageBlockSectionItem >
                                    <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                        <apex:outputpanel rendered="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Post_L__c.Accessible}">
                                     <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                            <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
                                                <div class="slds-form-element slds-p-around--small">	                                                                                                 
                                                    <abbr class="slds-required" title="required">*</abbr>
                                                    <apex:outputLabel value="Post" for="fldid" />
                                                    <div class="slds-form-element__control">
                                                        <apex:actionRegion >
                                                            <apex:inputField Label="Post" value="{!jobroleIns.xcdhcm__Post_L__c}" id="fldid" required="true" >
                                                                <apex:actionSupport event="onchange" action="{!defaultValueupdatefromCompJr}" rerender="theFrm" status="wait" />
                                                                <!--                                                                 <apex:actionStatus id="defaultStatus" startText="Please wait.........." />  -->
                                                            </apex:inputField>
                                                        </apex:actionRegion>
                                                    </div>                                                                                        
                                                </div>
                                            </div> 
                                        </apex:outputpanel>
                                    </apex:pageBlockSectionItem>
                                    
                                    <!-- START:: 16/08/2018 NPPD-1701 modified by Ranjeet -->
                                   	<apex:pageBlockSectionItem >
        		                    	<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                        <apex:outputpanel rendered="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Appointment_grade__c.Accessible}">
                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                            <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
                                                <div class="slds-form-element slds-p-around--small">                                                                                                     
                                                    <apex:outputLabel value="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Appointment_grade__c.label}" for="appointmentGradeId" />
                                                    <div class="slds-form-element__control">
                                                        <apex:inputField Label="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Appointment_grade__c.label}" value="{!jobRoleDetail.xcdhcm__Appointment_grade__c}" id="appointmentGradeId">
                                                        </apex:inputField>
                                                    </div>                                                                                        
                                                </div>
                                           	</div> 
	                                    </apex:outputpanel>
                                    </apex:pageBlockSectionItem>
                                    <!-- END:: 16/08/2018 NPPD-1701 modified by Ranjeet -->
                                    
                                    <apex:pageBlockSectionItem >
                                        <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                        <apex:outputpanel rendered="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Appointment_date__c.Accessible}">
                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                            <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
                                                <div class="slds-form-element slds-p-around--small">	                                                                                                 
                                                    <label class="slds-form-element__label" >
                                                        {!$objectType.Job_Role__c.fields.Appointment_date__c.Label}
                                                    </label> 
                                                    <div class="slds-form-element__control">
                                                    	<!-- START :: NPPD-1862 20/12/2018 Control Post field on Job role edit page via custom setting added by Ranjeet -->
                                                        <apex:inputField value="{!jobRoleDetail.xcdhcm__Appointment_date__c}"  />
                                                        <!-- END :: NPPD-1862 20/12/2018 Control Post field on Job role edit page via custom setting added by Ranjeet -->
                                                    </div>                                                                                        
                                                </div>
                                            </div> 
                                        </apex:outputpanel>
                                    </apex:pageBlockSectionItem>
                                </apex:pageBlockSection>
                                
                                <apex:pageBlockSection title="{!$Label.xcdhcm__jobrole_edit_employeeinformation}" id="infoId" collapsible="false" >
                                    <apex:repeat value="{!$ObjectType.xcdhcm__Job_Role__c.Fieldsets.xcdhcm__Job_role_information_Edit}" var="i">
                                        <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                    	<!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
                                        <apex:outputpanel rendered="{!AND(IF(NOT(OR(CONTAINS(i, 'Employment_Status__c'), CONTAINS(i, 'Employment_Type__c'), CONTAINS(i, 'Pattern_Type__c'), CONTAINS(i, 'Work_Cycle__c'), CONTAINS(i, 'Working_Days__c'), CONTAINS(i, 'First_day_of_cycle_editable__c'))), TRUE, FALSE),($ObjectType.xcdhcm__Job_Role__c.fields[i].Accessible))}">
                                        <!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                            <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
                                                <div class="slds-form-element slds-p-around--small">                                                                                                  
                                                    <label class="slds-form-element__label" style="{!IF(i.label=='Blankspace','display:none;' ,'')}" >
                                                        <apex:outputPanel rendered="{!i.required}" ><abbr class="slds-required" title="required">*</abbr></apex:outputPanel>  
                                                        {!i.label}
                                                        <span class="LiteHelpText">
                                                            <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields[i].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
                                                            <span>{!$ObjectType.Job_Role__c.fields[i].inlineHelpText}</span>
                                                        </span>
                                                    </label>
                                                    <div class="slds-form-element__control">
                                                        <apex:inputField value="{!jobRoleDetail[i]}"  required="{!i.required}" style="{!IF(i.label=='Blankspace','display:none;' ,'')}"/>
                                                    </div>                                                                                        
                                                </div>
                                            </div>  
                                        </apex:outputpanel>
                                    </apex:repeat> 
                                </apex:pageBlockSection>
                                
                                <apex:pageBlockSection title="{!$Label.xcdhcm__jobrole_edit_employeeduration}" id="empDurationId" collapsible="false" >
                                    <apex:repeat value="{!$ObjectType.xcdhcm__Job_Role__c.Fieldsets.xcdhcm__Job_Role_duration_Edit}" var="i">
                                         <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                    	<!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
                                        <apex:outputpanel rendered="{!AND(IF(NOT(OR(CONTAINS(i, 'Employment_Status__c'), CONTAINS(i, 'Employment_Type__c'), CONTAINS(i, 'Pattern_Type__c'), CONTAINS(i, 'Work_Cycle__c'), CONTAINS(i, 'Working_Days__c'), CONTAINS(i, 'First_day_of_cycle_editable__c'))), TRUE, FALSE),($ObjectType.xcdhcm__Job_Role__c.fields[i].Accessible))}">
                                        <!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->    
                                         <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                            <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
                                                <div class="slds-form-element slds-p-around--small">                                                                                                  
                                                    <label class="slds-form-element__label" style="{!IF(i.label=='Blankspace','display:none;' ,'')}" >
                                                        <apex:outputPanel rendered="{!i.required}" ><abbr class="slds-required" title="required">*</abbr></apex:outputPanel>  
                                                        {!i.label}
                                                        <span class="LiteHelpText">
                                                            <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields[i].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
                                                            <span>{!$ObjectType.Job_Role__c.fields[i].inlineHelpText}</span>
                                                        </span>
                                                    </label>
                                                    <div class="slds-form-element__control">
                                                    	<!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
                                                        <apex:actionRegion >
	                                                        <apex:inputField value="{!jobRoleDetail[i]}"  required="{!i.required}" style="{!IF(i.label=='Blankspace','display:none;' ,'')}" rendered="{!CONTAINS(i, 'Start_Date__c')}">
	                                                        	<apex:actionSupport event="onchange" action="{!setFirstDayOfCycle}" rerender="firstDayOfCyclePanel,error" status="wait"/>
	                                                        </apex:inputField>
                                                        </apex:actionRegion>
                                                        <apex:inputField value="{!jobRoleDetail[i]}"  required="{!i.required}" style="{!IF(i.label=='Blankspace','display:none;' ,'')}" rendered="{!NOT(CONTAINS(i, 'Start_Date__c'))}"/>
                                                    	<!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
                                                    </div>                                                                                        
                                                </div>
                                            </div>  
                                        </apex:outputpanel>
                                    </apex:repeat>
                                </apex:pageBlockSection>
                                
                                <!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
                                <apex:pageBlockSection title="{!$Label.xcdhcm__jobrole_edit_employeeworkinghours}" id="empWorkingHoursId" collapsible="false" >
									<apex:pageBlockSectionItem >			
										<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                        <apex:outputpanel rendered="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Employment_Status__c.Accessible}">
                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
			                                <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
			                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
			                                        <label class="slds-form-element__label" >
			                                            <abbr class="slds-required" title="required">*</abbr>
			                                            {!$ObjectType.Job_Role__c.fields['Employment_Status__c'].Label}
			                                            <span class="LiteHelpText">
			                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields['Employment_Status__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
			                                                <span>{!$ObjectType.Job_Role__c.fields['Employment_Status__c'].inlineHelpText}</span>
			                                            </span>
			                                        </label> 
			                                        <div class="slds-form-element__control">
			                                        	<apex:inputField value="{!jobRoleDetail['Employment_Status__c']}" required="true"/>
			                                        </div>                                                                                        
			                                    </div>
			                                </div> 
			                            </apex:outputpanel>
	                       			</apex:pageBlockSectionItem>
	                       			<apex:pageBlockSectionItem >
										<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                        <apex:outputpanel rendered="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Employment_Type__c.Accessible}">
                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
			                                <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
			                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
			                                        <label class="slds-form-element__label" >
			                                            <abbr class="slds-required" title="required">*</abbr>
			                                            {!$ObjectType.Job_Role__c.fields['Employment_Type__c'].Label}
			                                            <span class="LiteHelpText">
			                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields['Employment_Type__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
			                                                <span>{!$ObjectType.Job_Role__c.fields['Employment_Type__c'].inlineHelpText}</span>
			                                            </span>
			                                        </label> 
			                                        <div class="slds-form-element__control">
								<!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->                                
								
			                                        	<apex:inputField value="{!jobRoleDetail['Employment_Type__c']}" required="true"/>
			                                        </div>                                                                                        
			                                    </div>
			                                </div> 
			                            </apex:outputpanel>
									</apex:pageBlockSectionItem>	
									<apex:pageBlockSectionItem >
									   <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                        <apex:outputpanel rendered="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Pattern_Type__c.Accessible}">
                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
			                                <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
			                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
			                                        <label class="slds-form-element__label" >
			                                            <abbr class="slds-required" title="required">*</abbr>
			                                            {!$ObjectType.Job_Role__c.fields['Pattern_Type__c'].Label}
			                                            <span class="LiteHelpText">
			                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields['Pattern_Type__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
			                                                <span>{!$ObjectType.Job_Role__c.fields['Pattern_Type__c'].inlineHelpText}</span>
			                                            </span>
			                                        </label> 
			                                        <div class="slds-form-element__control">
			                                            <apex:actionRegion >
			                                                <apex:inputField value="{!jobRoleDetail['Pattern_Type__c']}" required="true">
			                                                	<apex:actionSupport event="onchange" rerender="workCyclePanel, error" status="wait"/>
			                                                </apex:inputField>
			                                            </apex:actionRegion>
			                                        </div>                                                                                        
			                                    </div>
			                                </div> 
			                            </apex:outputpanel>
	                                </apex:pageBlockSectionItem>
									<apex:pageBlockSectionItem >
									 <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                        <apex:outputpanel id="workCyclePanel" rendered="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Working_Days__c.Accessible}">
                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
											<apex:outputpanel rendered="{!IF(NOT(AND( jobRoleDetail['Pattern_Type__c'] = 'Flexible working days', jobRoleDetail['Pattern_Type__c'] = 'Irregular shift pattern')),true,false)}" > 
												<apex:outputpanel rendered="{!IF(AND(jobRoleDetail['Pattern_Type__c'] != 'Work cycle - days', jobRoleDetail['Pattern_Type__c'] != 'Work cycle - hours', jobRoleDetail['Pattern_Type__c'] != 'Flexible working days', jobRoleDetail['Pattern_Type__c'] != 'Irregular shift pattern'),true,false)}" > 
													<div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
													    <div class="slds-form-element slds-p-around--small">                                                                                                     
													        <label class="slds-form-element__label" >
													            <abbr class="slds-required" title="required">*</abbr>
													            {!$ObjectType.Job_Role__c.fields['Working_Days__c'].Label}
													            <span class="LiteHelpText">
													                <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields['Working_Days__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
													                <span>{!$ObjectType.Job_Role__c.fields['Working_Days__c'].inlineHelpText}</span>
													            </span>
													        </label> 
													        <div class="slds-form-element__control">
													        	<apex:inputField id="JWorkingdays" value="{!jobRoleDetail['Working_Days__c']}" required="true"/>
													        </div>
													    </div>
													</div> 
												</apex:outputpanel>
												
											     <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
												<apex:outputpanel rendered="{!AND(IF(OR(jobRoleDetail['Pattern_Type__c'] = 'Work cycle - days', jobRoleDetail['Pattern_Type__c'] = 'Work cycle - hours'),true,false),($objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Work_Cycle__c.Accessible))}" > 
												 <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
													<div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
													    <div class="slds-form-element slds-p-around--small">                                                                                                     
													        <label class="slds-form-element__label" >
													            <abbr class="slds-required" title="required">*</abbr>
													            {!$ObjectType.Job_Role__c.fields['Work_Cycle__c'].Label}
													            <span class="LiteHelpText">
													                <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields['Work_Cycle__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
													                <span>{!$ObjectType.Job_Role__c.fields['Work_Cycle__c'].inlineHelpText}</span>
													            </span>
													        </label> 
													        <div class="slds-form-element__control">
					                                        	<apex:actionRegion >
					                                                <apex:inputField id="workCycle" value="{!jobRoleDetail['Work_Cycle__c']}" required="true">
					                                                	<!-- START :: NPPD-1720 11/09/2018  Modified by Ranjeet -->
			    	                                                	<apex:actionSupport event="onselect" action="{!setFirstDayOfCycle}" rerender="firstDayOfCyclePanel,error" status="wait"/>
					                                                	<!-- END :: NPPD-1720 11/09/2018  Modified by Ranjeet -->
					                                                </apex:inputField>
				                                                </apex:actionRegion>
													        </div>
													    </div>
													</div> 
												</apex:outputpanel>

												<apex:outputpanel id="firstDayOfCyclePanel">
										<!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->                                
													<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
													<apex:outputpanel id="first-day-of-cycle-panel" rendered="{!AND(IF(OR(jobRoleDetail['Pattern_Type__c'] = 'Work cycle - days', jobRoleDetail['Pattern_Type__c'] = 'Work cycle - hours'),true,false),($objectType.xcdhcm__Job_Role__c.fields.xcdhcm__First_day_of_cycle_editable__c.Accessible))}" > 
												     <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
														<div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
														    <div class="slds-form-element slds-p-around--small">                                                                                                     
														        <label class="slds-form-element__label" >
														            {!$ObjectType.Job_Role__c.fields['First_day_of_cycle_editable__c'].Label}
														            <span class="LiteHelpText">
														                <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields['First_day_of_cycle_editable__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
														                <span>{!$ObjectType.Job_Role__c.fields['First_day_of_cycle_editable__c'].inlineHelpText}</span>
														            </span>
														        </label> 
														        <div class="slds-form-element__control">
					                                                <apex:inputField id="first-day-of-cycle" value="{!jobRoleDetail['First_day_of_cycle_editable__c']}"/>
														        </div>
														    </div>
														</div> 
													</apex:outputpanel>
												</apex:outputpanel>
											
											</apex:outputpanel>	                                	
	                                    </apex:outputPanel> 
	                                </apex:pageBlockSectionItem>
                                
                                    <apex:repeat value="{!$ObjectType.xcdhcm__Job_Role__c.Fieldsets.xcdhcm__Job_Role_Working_Hours_Edit}" var="i">
                                        <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata-->          
                                        <apex:outputpanel rendered="{!AND(IF(NOT(OR(CONTAINS(i, 'Employment_Status__c'), CONTAINS(i, 'Employment_Type__c'), CONTAINS(i, 'Pattern_Type__c'), CONTAINS(i, 'Work_Cycle__c'), CONTAINS(i, 'Working_Days__c'), CONTAINS(i, 'First_day_of_cycle_editable__c'))), TRUE, FALSE),($ObjectType.xcdhcm__Job_Role__c.fields[i].Accessible))}">
	                                    <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
	                                        <apex:outputPanel >
	                                            <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
	                                                <div class="slds-form-element slds-p-around--small">                                                                                                  
	                                                    <label class="slds-form-element__label" style="{!IF(i.label=='Blankspace','display:none;' ,'')}" >
	                                                        <apex:outputPanel rendered="{!i.required}" ><abbr class="slds-required" title="required">*</abbr></apex:outputPanel>  
	                                                        {!i.label}
	                                                        <span class="LiteHelpText">
	                                                            <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields[i].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
	                                                            <span>{!$ObjectType.Job_Role__c.fields[i].inlineHelpText}</span>
	                                                        </span>
	                                                    </label>

	                                                    <div class="slds-form-element__control">
	                                                    	<apex:outputPanel rendered="{!IF(AND(NOT(CONTAINS(i, 'Working_Days_Week__c')), NOT(CONTAINS(i, 'Contractual_Hours__c'))), TRUE, FALSE)}">
	                                                        	<apex:inputField value="{!jobRoleDetail[i]}"  required="{!i.required}" style="{!IF(i.label=='Blankspace','display:none;' ,'')}"/>
				                                        	</apex:outputPanel>

	                                                    	<apex:outputPanel rendered="{!IF(CONTAINS(i, 'Contractual_Hours__c'), TRUE, FALSE)}">
	                                                        	<apex:inputField value="{!jobRoleDetail[i]}" onchange="setParams('Contractual_Hours__c', this.value);"  required="{!i.required}" style="{!IF(i.label=='Blankspace','display:none;' ,'')}"/>
				                                        	</apex:outputPanel>
				                                        	
				                                        	<apex:outputPanel rendered="{!IF(CONTAINS(i, 'Working_Days_Week__c'), TRUE, FALSE)}">
				                                        		<!-- START :: NPPD-1162 12/04/2018  Modified by Ranjeet -->
					                                        	<apex:inputField value="{!jobRoleDetail[i]}" onchange="setParams('Working_Days_Week__c', this.value);" required="true"/>
					                                         	<!-- END :: NPPD-1162 12/04/2018  Modified by Ranjeet -->
			                                                </apex:outputPanel>
	                                                    </div> 
	                                                                                                                                           
	                                                </div>
	                                            </div> 
                                            </apex:outputPanel> 
                                        </apex:outputpanel>
                                    </apex:repeat>
                                </apex:pageBlockSection>   
                                	
                                <!-- START :: NPPD-1853 22/12/2018 Job Role Field Sets - Tidy Up added by Namrata -->
								<apex:pageBlockSection title="{!$Label.xcdhcm__clonejbrole_seniority_entitlement}"
									collapsible="false">
									<apex:repeat value="{!$ObjectType.xcdhcm__Job_Role__c.Fieldsets.xcdhcm__Seniority_and_leave_entitlement}"
										var="n">
										<apex:outputpanel rendered="{!$ObjectType.xcdhcm__Job_Role__c.fields[n].Accessible}">
											<div
												class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
												<div class="slds-form-element slds-p-around--small">
													<label class="slds-form-element__label"
														style="IF (n.label=='Blankspace','display: none;' ,'')}">
														<apex:outputPanel rendered="{!n.required}">
															<abbr class="slds-required" title="required">*</abbr>
														</apex:outputPanel> {!n.label} <span class="LiteHelpText"> <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields[n].inlineHelpText))}"
																value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}" />
															<span>{!$ObjectType.Job_Role__c.fields[n].inlineHelpText}</span>
													</span>
													</label>
													<div class="slds-form-element__control">
														<apex:inputField value="{!jobRoleDetail[n]}"
															required="{!n.required}"
															style="{!IF(n.label=='Blankspace','display:none;' ,'')}" />
													</div>
												</div>
											</div>
										</apex:outputpanel>
									</apex:repeat>
								</apex:pageBlockSection>
			     			<!-- END :: NPPD-1853 22/12/2018 Job Role Field Sets - Tidy Up added by Namrata -->
                                
                                <apex:actionRegion >
                                    <apex:pageBlockSection title="{!$Label.xcdhcm__clonejbrole_extended_permission}" id="extendedSharingId" columns="2" rendered="{!if(($User.Id != jobRoleDetail.Employee_Details__r.xcdhcm__User__c),true,false)}" collapsible="false">  	
                                <!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->                                
				        <apex:pageBlockSectionItem >   
                                            <apex:outputpanel >
                                                <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
                                                    <div class="slds-form-element slds-p-around--small">	     
                                                        <label class="slds-form-element__label" >
                                                            <abbr class="slds-required" title="required">*</abbr>
                                                            {!$Label.xcdhcm__clonejbrolesextendedpermissionsiprofile}
                                                        </label> 
                                                        <div class="slds-form-element__control">
                                                            <apex:actionRegion >  
                                                                <apex:outputPanel styleClass="requiredInput" layout="block">
                                                                    <apex:outputPanel styleClass="requiredBlock" layout="block" />
                                                                    <apex:selectList label="{!$Label.xcdhcm__clonejbrolesextendedpermissionsiprofile}" id="profilePicklist" value="{!ProfileId}" size="1" required="true" tabindex="10">  
                                                                        <apex:selectOptions value="{!ProfileOptions}"/>  
                                                                    </apex:selectList>  
                                                                </apex:outputPanel>
                                                            </apex:actionRegion>  
                                                        </div>                                                                                        
                                                    </div>
                                                </div> 
                                            </apex:outputpanel>
                                        </apex:pageBlockSectionItem> 
                                        
						 <!-- START :: 01-09-2017 Summer2017Patch NPPD-1516 Joiner Process - Data Security Modified by Rahul S -->
			            <apex:pageBlockSectionItem rendered="{!AND(ShowPermissionSetField, userInactive!=true)}" > 
			             <!-- END :: 01-09-2017 Summer2017Patch NPPD-1516 Joiner Process - Data Security Modified by Rahul S -->
					    <apex:outputpanel >
                                                <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
                                                    <div class="slds-form-element slds-p-around--small">	                                                                                                 
                                                        <label class="slds-form-element__label" >
                                                            {!$Label.CloneJBRoleSExtendedPermissionSIPermissionset}
                                                        </label> 
                                                        <div class="slds-form-element__control" style="width:200% !important">
                                                            <c:MultiselectPicklist leftOption="{!deSelectedPermissionSet}" rightOption="{!selectedPermissionSet}" size="5" width="150px"/>
                                                        </div>                                                                                        
                                                    </div>
                                                </div> 
                                            </apex:outputpanel>
                                        </apex:pageBlockSectionItem>
                                        
			             <!-- START :: 01-09-2017 Summer2017Patch NPPD-1516 Joiner Process - Data Security Modified by Rahul S -->
			            <apex:pageBlockSectionItem rendered="{!ShowPublicGroupField}"> 
			             <!-- END :: 01-09-2017 Summer2017Patch NPPD-1516 Joiner Process - Data Security Modified by Rahul S -->
				    <apex:outputpanel >
                                                <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
                                                    <div class="slds-form-element slds-p-around--small">	                                                                                                 
                                                        <label class="slds-form-element__label" >
                                                            {!$Label.CloneJBRoleSExtendedPermissionSIAssigntopublicgroups}
                                                        </label> 
                                                        <div class="slds-form-element__control" style="width:200% !important">
                                                            <apex:outputPanel >
                                                                <c:MultiselectPicklist leftOption="{!deSelectedPublicGroupSet}" rightOption="{!selectedPublicGroupSet}" size="5" width="150px"/>
                                                            </apex:outputPanel>
                                                        </div>                                                                                        
                                                    </div>
                                                </div> 
                                            </apex:outputpanel>
                                        </apex:pageBlockSectionItem>
                                        
                                    </apex:pageBlockSection>
                                </apex:actionRegion>

    							<!-- START :: NPPD-1853 22/12/2018 Job Role Field Sets - Tidy Up commented by Namrata -->
								<!-- START :: NPPD-1162 12/04/2018 Add new section Seniority Entitlement on Change job role page Added by Ranjeet                                
                                <apex:pageBlockSection title="{!$Label.xcdhcm__clonejbrole_seniority_entitlement}" id="seniorityEntitlementId" collapsible="false" >
									<apex:pageBlockSectionItem >			
									<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata
                                        <apex:outputpanel id="workCyclePanel" rendered="{!$objectType.Job_Role__c.fields.Additional_Leave_for_Job_Role_Seniority__c.Accessible}">
                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata
			                                <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
			                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
			                                        <label class="slds-form-element__label" >
			                                            {!$ObjectType.Job_Role__c.fields['Additional_Leave_for_Job_Role_Seniority__c'].Label}
			                                            <span class="LiteHelpText">
			                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.Job_Role__c.fields['Additional_Leave_for_Job_Role_Seniority__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
			                                                <span>{!$ObjectType.Job_Role__c.fields['Additional_Leave_for_Job_Role_Seniority__c'].inlineHelpText}</span>
			                                            </span>
			                                        </label> 
			                                        <div class="slds-form-element__control">
			                                        	<apex:inputField value="{!jobRoleDetail['Additional_Leave_for_Job_Role_Seniority__c']}"/>
			                                        </div>                                                                                        
			                                    </div>
			                                </div> 
			                            </apex:outputpanel>
	                       			</apex:pageBlockSectionItem>
									<apex:pageBlockSectionItem >			
										<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata 
                                        <apex:outputpanel id="workCyclePanel" rendered="{!$objectType.Job_Role__c.fields.Seniority_status__c.Accessible}">
                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata 
			                                <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
			                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
			                                        <label class="slds-form-element__label" >
			                                            {!$ObjectType.Job_Role__c.fields['Seniority_status__c'].Label}
			                                            <span class="LiteHelpText">
			                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.Job_Role__c.fields['Seniority_status__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
			                                                <span>{!$ObjectType.Job_Role__c.fields['Seniority_status__c'].inlineHelpText}</span>
			                                            </span>
			                                        </label> 
			                                        <div class="slds-form-element__control">
			                                        	<apex:inputField value="{!jobRoleDetail['Seniority_status__c']}"/>
			                                        </div>                                                                                        
			                                    </div>
			                                </div> 
			                            </apex:outputpanel>
	                       			</apex:pageBlockSectionItem>
									<apex:pageBlockSectionItem >			
										<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata 
                                        <apex:outputpanel id="workCyclePanel" rendered="{!$objectType.Job_Role__c.fields.Additional_Contractual_Leave_Entitlement__c.Accessible}">
                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata 
			                                <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
			                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
			                                        <label class="slds-form-element__label" >
			                                            {!$ObjectType.Job_Role__c.fields['Additional_Contractual_Leave_Entitlement__c'].Label}
			                                            <span class="LiteHelpText">
			                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.Job_Role__c.fields['Additional_Contractual_Leave_Entitlement__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
			                                                <span>{!$ObjectType.Job_Role__c.fields['Additional_Contractual_Leave_Entitlement__c'].inlineHelpText}</span>
			                                            </span>
			                                        </label> 
			                                        <div class="slds-form-element__control">
			                                        	<apex:inputField value="{!jobRoleDetail['Additional_Contractual_Leave_Entitlement__c']}"/>
			                                        </div>                                                                                        
			                                    </div>
			                                </div> 
			                            </apex:outputpanel>
	                       			</apex:pageBlockSectionItem>
									<apex:pageBlockSectionItem >			
										<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata
                                        <apex:outputpanel id="workCyclePanel" rendered="{!$objectType.Job_Role__c.fields.Entitlement_notes__c.Accessible}">
                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata
			                                <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
			                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
			                                        <label class="slds-form-element__label" >
			                                            {!$ObjectType.Job_Role__c.fields['Entitlement_notes__c'].Label}
			                                            <span class="LiteHelpText">
			                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.Job_Role__c.fields['Entitlement_notes__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
			                                                <span>{!$ObjectType.Job_Role__c.fields['Entitlement_notes__c'].inlineHelpText}</span>
			                                            </span>
			                                        </label> 
			                                        <div class="slds-form-element__control">
			                                        	<apex:inputField value="{!jobRoleDetail['Entitlement_notes__c']}"/>
			                                        </div>                                                                                        
			                                    </div>
			                                </div> 
			                            </apex:outputpanel>
	                       			</apex:pageBlockSectionItem>
                                </apex:pageBlockSection>   
								 END :: NPPD-1162 12/04/2018 Add new section Seniority Entitlement on Change job role page Added by Ranjeet -->  
								 <!-- END :: NPPD-1853 22/12/2018 Job Role Field Sets - Tidy Up commented by Namrata -->                              
                            </apex:pageBlock>
                            <apex:outputPanel id="popup">
                                <apex:outputPanel rendered="{!(displayJobRolePopup)}">
                                    <apex:outputPanel styleClass="popupBg"/>
                                    <apex:outputPanel id="popup1" styleClass="customPopup" layout="block" >
                                        <center>
                                        	<!-- START :: NPPD-1162 12/04/2018 Work cycle related validation error messages Added by Ranjeet -->
                                            <apex:outputtext id="oText2" value="{!popupMsg}"/>
                                            <!-- END :: NPPD-1162 12/04/2018 Work cycle related validation error messages Added by Ranjeet -->
                                        </center>
                                        <apex:outputPanel > 
                                            <apex:actionStatus id="saveStatus1">                   
                                                <apex:facet name="stop">
                                                    <apex:outputPanel > 
                                        				<!--START :: 03/11/2018 NPPD-1776 Change job role and review compensation doesn't show grade and spine points - bug fix modify by Sabir  -->
                                                        <apex:commandButton value="{!$Label.xcdhcm__clonejbrolebcancel}" styleclass="slds-button slds-button--neutral" action="{!cancelChangeJobRoleRequestPopUp}"  rerender="popup" status="saveStatus1" />
                                        				<!--END :: 03/11/2018 NPPD-1776 Change job role and review compensation doesn't show grade and spine points - bug fix modify by Sabir  -->
                                                        <apex:commandButton value="{!$Label.xcdhcm__clonejbrolebok}" styleclass="slds-button slds-button--neutral" action="{!saveJobRoleDetail}" rendered="{!saveBtn}"  rerender="popup, confirmNewJrWithNoLyPopup, error"  status="saveStatus1" />
                                                        <apex:commandButton value="{!$Label.xcdhcm__clonejbrolebok}" styleclass="slds-button slds-button--neutral" action="{!saveJobRoleAndNewCopm}" rendered="{!AND(SaveandCompBtn=true,saveBtn != true)}"  rerender="popup, confirmNewJrWithNoLyPopup, error" status="saveStatus1"/>
                                                    </apex:outputPanel> 
                                                </apex:facet>
                                                <apex:facet name="start">
                                                    <apex:outputPanel >
                                                        <div class="slds-spinner_container slds-show " >
                                                            <div class="slds-spinner--brand slds-spinner slds-spinner--medium" aria-hidden="false" role="alert">
                                                                <div class="slds-spinner__dot-a"></div>
                                                                <div class="slds-spinner__dot-b"></div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>                        
                                                </apex:facet>                                
                                            </apex:actionStatus> 
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </apex:outputPanel>
                            
                            <apex:outputPanel id="confirmNewJrWithNoLyPopup">
                                <apex:outputPanel rendered="{!displayJobRoleNoLyPopup}">
                                    <apex:outputPanel styleClass="popupBg"/>
                                    <apex:outputPanel styleClass="customPopup" layout="block" >
                                        <center>
                                            <apex:outputtext value="No Leave Year has been set up to support this new Job Role.  Please click OK to proceed and set up the new Job Role without a Leave Year.  Alternatively you may cancel and set up a new Leave Year before changing the Job Role."/>
                                        </center>
                                        <apex:outputPanel > 
                                            <apex:actionStatus id="saveStatus2">                   
                                                <apex:facet name="stop">
                                                    <apex:outputPanel > 
                                                        <apex:commandButton value="{!$Label.xcdhcm__clonejbrolebcancel}"  styleclass="slds-button slds-button--neutral" action="{!cancelCreateNewJobrole}"  rerender="confirmNewJrWithNoLyPopup" status="saveStatus2"/>
                                                        <apex:commandButton value="{!$Label.xcdhcm__clonejbrolebok}" styleclass="slds-button slds-button--neutral" action="{!confirmCreateNewJobrole}"  rerender="confirmNewJrWithNoLyPopup, error" status="saveStatus2" />
                                                    </apex:outputPanel> 
                                                </apex:facet>
                                                <apex:facet name="start">
                                                    <apex:outputPanel >
                                                        <div class="slds-spinner_container slds-show "  >
                                                            <div class="slds-spinner--brand slds-spinner slds-spinner--medium" aria-hidden="false" role="alert">
                                                                <div class="slds-spinner__dot-a"></div>
                                                                <div class="slds-spinner__dot-b"></div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>                        
                                                </apex:facet>                                
                                            </apex:actionStatus> 
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </apex:outputPanel>
                            <!-- ================================== Page content  ==========================================================    -->
                            <!--START :: 13/07/2017 NPAY-513 First Period Payment does not calculate for Irregular workers added by Tutu -->
                            <apex:outputPanel id="popup3">
                                <apex:outputpanel styleClass="popupBg" rendered="{!displayPopup}" style="opacity: 0.2;background-color: black;"/>
                                <apex:outputPanel styleClass="customPopup" layout="block" rendered="{!displayPopup}">
                                    <center>  
                                        <apex:outputtext value="{!validationPopupMsg}" rendered="{!displayPopup}"/>
                                        <br/><br/>
                                        <apex:commandButton value="{!$Label.xcdhcm__payrollperiodbok}" action="{!confirmJobRoleAndNewCompRequest}" rendered="{!displayCompOkButton == true}" rerender="popup,popup3,error" styleclass="btn slds-button slds-button--brand" status="saveStatus"/>
                                        <apex:commandButton value="{!$Label.xcdhcm__payrollperiodbok}" action="{!confirmNewJobRoleRequest}" rendered="{!displayCompOkButton == false}" rerender="popup,popup3,error" styleclass="btn slds-button slds-button--brand" status="saveStatus"/>
                                        <apex:commandButton value="{!$Label.xcdhcm__payrollperiodbcancel}" action="{!cancelPopup}" onClick="disableButton(this);" styleclass="slds-button slds-button--neutral"/>
                                    </center>
                                </apex:outputPanel>
                            </apex:outputPanel>
                            <!--END :: 13/07/2017 NPAY-513 First Period Payment does not calculate for Irregular workers added by Tutu -->
                        </div>
                        <div class="slds-modal__footer">
                            <apex:actionStatus id="nextStatus">                   
                                <apex:facet name="stop">
                                    <apex:outputPanel >
                                        <apex:commandButton value="{!$Label.xcdhcm__clonejbrolebcancel}" action="{!cancelChangeJobRoleRequest}" immediate="true" rerender="popup,error,btns2A" styleclass="slds-button slds-button--neutral" status="nextStatus"/>
                                        <!--START :: 13/07/2017 NPAY-513 First Period Payment does not calculate for Irregular workers added by Tutu -->
                                        <apex:commandButton id="btns2B" action="{!createIrregularPopupOnChangeJobRole}"  rerender="popup3,popup,error,btns2B" value="{!$Label.xcdhcm__clonejbrolebsaveandnewcompensation}" rendered="{!SaveandCompBtn=true}" styleclass="slds-button slds-button--neutral" status="nextStatus"/>
                                        <!--START :: 26/09/2018 Save button redirects to Save and review compensation page issue fixes modified by Ranjeet -->
										<apex:commandButton id="btnsB" action="{!createIrrPopupOnSaveJobRole}"  rerender="popup3,popup,error,btnsB" value="{!$Label.xcdhcm__clonejbrolebsave}" styleclass="slds-button slds-button--brand" status="nextStatus"/>
<!--                                         <apex:commandButton id="btnsB" action="{!createIrrPopupOnSaveJobRole}"  rerender="popup3,popup,error,btnsB" value="{!$Label.xcdhcm__clonejbrolebsave}" rendered="{!SaveandCompBtn!=true}" styleclass="slds-button slds-button--brand" status="nextStatus"/> -->
<!--                                         <apex:commandButton id="btns1B" action="{!createIrrPopupOnSaveJobRole}"  rerender="popup3,popup,error,btns1B" value="{!$Label.xcdhcm__clonejbrolebsave}" rendered="{!SaveandCompBtn=true}" styleclass="slds-button slds-button--brand" status="nextStatus"/> -->
                                        <!--END :: 26/09/2018 Save button redirects to Save and review compensation page issue fixes modified by Ranjeet -->
                                        <!--END :: 13/07/2017 NPAY-513 First Period Payment does not calculate for Irregular workers added by Tutu -->
                                    </apex:outputPanel>
                                </apex:facet>
                                <apex:facet name="start">
                                    <div class="slds-spinner_container slds-show" style="top:10%; bottom:9%">
                                        <div class="slds-spinner--brand slds-spinner slds-spinner--medium" aria-hidden="false" role="alert">
                                            <div class="slds-spinner__dot-a"></div>
                                            <div class="slds-spinner__dot-b"></div>
                                        </div> 
                                    </div>                    
                                </apex:facet>                                
                            </apex:actionStatus> 
                        </div>
                    </div>
                </div>
                <div class="slds-backdrop slds-backdrop--open"></div>
            </apex:form>
        </body>
	    
	    <!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet-->
		<script type="text/javascript">
			var contractualHrs = "{!JSENCODE(contractualHrs)}";
			var workingDaysperWeek = "{!JSENCODE(workingDaysperWeek)}";
			
			function setParams(param, val)
			{
				if(param == 'Contractual_Hours__c')
				{
					contractualHrs = val;
				}
				else
				{
					workingDaysperWeek = val;
				}
			}
		 
			function openLookup(baseURL, width, modified, searchParam)
			{
				var originalbaseURL = baseURL;
				var originalwidth = width;
				var originalmodified = modified;
				var originalsearchParam = searchParam;
				var lookupType = baseURL.substr(baseURL.length-3, 3);
				
				if (modified == '1') 
				{
					baseURL = baseURL + searchParam;
				}
	
				var isCustomLookup = false;
	
				// Following "a0t" is the lookup type for Work_cycle__c object so change this as per your standard or custom object
				if(lookupType == '{!workCyclePrefixVal}')
				{
					var urlArr = baseURL.split("&");
					var txtId = '';
					if(urlArr.length > 2) 
					{
						urlArr = urlArr[1].split('=');
						txtId = urlArr[1];
					}
	
					// Following is the url of Custom Lookup page. You need to change that accordingly
					baseURL = "/apex/xcdhcm__CustomWorkCycleLookup?txt=" + txtId;
	
					// Following is the id of apex:form control "theForm". You need to change that accordingly
					baseURL = baseURL + "&frm=" + escapeUTF("{!$Component.theForm}");
					if (modified == '1') 
					{
						baseURL = baseURL + "&lksearch=" + searchParam;
					}
					
					if(contractualHrs != undefined)
					{
						baseURL += "&contractual_hrs=" + escapeUTF(contractualHrs);
					}
					
					if(workingDaysperWeek != undefined)
					{
						baseURL += "&working_days_per_week=" + escapeUTF(workingDaysperWeek);
					}
	
					// Following is the ID of inputField that is the lookup to be customized as custom lookup
					if(txtId.indexOf('workCycle') > -1 )
					{				
						isCustomLookup = true;
					}
				}
	
				if(isCustomLookup == true)
				{
					openPopup(baseURL, "lookup", 350, 480, "width="+width+",height=480,toolbar=no,status=no,directories=no,menubar=no,resizable=yes,scrollable=no", true);
				}
				else 
				{
					if (modified == '1') 
					{
						originalbaseURL = originalbaseURL + originalsearchParam;
					}
					openPopup(originalbaseURL, "lookup", 350, 480, "width="+originalwidth+",height=480,toolbar=no,status=no,directories=no,menubar=no,resizable=yes,scrollable=no", true);
				} 
			}
			
		</script>           
	    <!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet-->
    </html>
</apex:page>