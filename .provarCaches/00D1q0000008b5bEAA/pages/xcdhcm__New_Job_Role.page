<apex:page standardController="xcdhcm__Employee_Detail__c" extensions="xcdhcm.EmployeeExtensionController" sidebar="false" showHeader="true" wizard="false" >      
    <apex:stylesheet value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/LiteEmployeeSub.css')}" />          
    <style>
        .multiSelectPicklistTable tr:first-child
        {
        display:none;
        }  
        .slds-scope .slds-section-title--divider 
        {  
        text-transform: none !important;
        font-size: 1rem;
        line-height: 0.6!important;
        border-radius: 4px!important;
        font-weight: 500!important; 
        } 
        .apexp .bPageBlock.apexDefaultPageBlock .pbBody .pbSubheader 
        {
        color: rgba(153, 153, 153, 0.92);
        }
        .Custom108Tab .tertiaryPalette, .individualPalette .Custom108Block .tertiaryPalette, .layoutEdit .individualPalette .Custom108Block .tertiaryPalette 
        {
        background-color: #ccc;
        border-color: #ccc;
        padding: .75rem 1rem;
        background: #f4f6f9;
        border-radius: 4px;
        color: #54698d!important;
        font-size: 1.15em;
        letter-spacing: .0625rem;
        font-weight: 500;
        }
        .bPageBlock .requiredInput .requiredBlock 
        {
        display:none!important;
        }
        .closeIcon
        {
        display:none!important;
        }
        input[type='text'] 
        {
        width: 100%;
        }  
        textarea
        {
        width:100%;
        } 
        select
        {
        width:100%!important;
        }
        .bPageBlock .detailList tr td, .bPageBlock .detailList tr th, .hoverDetail .bPageBlock .detailList tr td, .hoverDetail .bPageBlock .detailList tr th 
        {
        border-bottom: white;
        }
        .multiSelectPicklistTable
        {
            width: 200% !important;
        }
        .multiSelectPicklistTable .multiSelectPicklistRow .multiSelectPicklistCell 
        {
             width: 5.5% !important;
        }
        .leftArrowIcon , .rightArrowIcon
        {
             width: 25Px;
             height: 20px !important;
        }
        .datePicker
        { 
		   margin-left:210px !important;
		   width: 21% !important;
		   position: sticky !important;    
		} 
		<!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet-->
        .popupBg
        {
	        //background-color:#FFFFFF;
	        opacity: 1.0;
	        filter: alpha(opacity = 60);
	        position: absolute;
	        width: 100%;
	        height: 100%;
	        top: 0;
	        left: 0;
	        z-index: 9998;
        }
        .customPopup
        {
	        line-height: 25px;
	        position: absolute;
	        left: 50%;
	        padding:10px;
	        z-index: 9999;
	        text-align: center;
	        top: 40%;
	        width: 500px;
	        margin-left: -250px;
	        text-decoration: none;
	        font-weight: bold;
	        
	        background: #ffffff !important;
	        border: 1px solid #ccc !important;
	        
	        -moz-box-shadow: 4px 5px 10px #99ccff;
	        -webkit-box-shadow: 4px 5px 10px #99ccff;
	        box-shadow: 4px 5px 10px #99ccff;
	        -webkit-border-radius: 5px;
	        -moz-border-radius: 5px;
	        color:#336699;
        }
        <!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet-->
        <!-- START :: 28/11/2018 NPPD-1809,NPPD-1862 modified by Ranjeet -->
		.lookupInput 
		{
			display: inline-table;
    		width: 100% !important;
		}
		.lookupInput img 
		{
			margin-right: 2em;
			margin-top: 10px;
		}
		<!-- END :: 28/11/2018 NPPD-1809,NPPD-1862 modified by Ranjeet -->
    </style>
    
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <head>
            <apex:slds />
        </head>
        <body class="slds-scope">
            <apex:form id="theFrm">
                <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal--large">
                    <div class="slds-modal__container">
                        <div class="slds-modal__header">
                            <apex:commandLink action="{!cancelJobrole}" id="theCommandLink1" immediate="true" styleclass="slds-button slds-modal__close slds-button--icon-inverse">
                                <img src="{!URLFOR($Resource.XCD_static_resources,'Css/Lite/close.PNG')}" alt="Cancel" style="width: 67%;"/>  
                            </apex:commandLink>
                            <h2 id="header43" class="slds-text-heading--medium">{!$Label.PHNew_Job_Role}</h2>
                        </div>
                        <div class="slds-modal__content slds-p-around--medium"> 
                            <!-- ================================== Page content  ==========================================================    -->
                            <apex:pageBlock >  
                            	<!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
                            	<apex:outputPanel id="error">
                            		<apex:pageMessages escape="false"/>
                                </apex:outputPanel>
                                <!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
                                
                                <apex:actionStatus id="wait">                   
                                    <apex:facet name="start">
                                        <div class="slds-spinner_container slds-show slds-is-fixed" >
                                            <div class="slds-spinner--brand slds-spinner slds-spinner--medium" aria-hidden="false" role="alert">
                                                <div class="slds-spinner__dot-a"></div>
                                                <div class="slds-spinner__dot-b"></div>
                                            </div>
                                        </div>
                                    </apex:facet>
                                    <apex:facet name="stop">
                                        <div class="slds-spinner_container slds-hide slds-is-fixed">
                                            <div class="slds-spinner--brand slds-spinner slds-spinner--medium" aria-hidden="false" role="alert">
                                                <div class="slds-spinner__dot-a"></div>
                                                <div class="slds-spinner__dot-b"></div>
                                            </div>
                                        </div>
                                    </apex:facet>                                
                                </apex:actionStatus>
                                
                                <!-- START:: 16/08/2018 NPPD-1701 modified by Ranjeet -->
                                <!-- START :: 19-09-2018 NPPD-1674 P1 Summer2018 Hybrid Joiner Process Modified by Rahul S -->
                                <apex:pageBlockSection title="Post" columns="2" collapsible="false" rendered="{!displayPost}">
                                <!-- END :: 19-09-2018 NPPD-1674 P1 Summer2018 Hybrid Joiner Process Modified by Rahul S -->
	                                <apex:pageBlockSectionItem >
                                    	<!-- START:: 24/12/2018 NPPD-1819 FLS Not Affecting Edit Page Label modify by  Ranjeet-->
                                       	<apex:outputpanel rendered="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Post_L__c.Accessible}">
                                       	<!-- END:: 24/12/2018 NPPD-1819 FLS Not Affecting Edit Page Label modify by  Ranjeet-->
	                                        <apex:actionRegion >
		                                        <apex:outputpanel rendered="{!displayPost}">
		                                           <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
		                                                <div class="slds-form-element slds-p-around--small">                                                                                                     
		                                                    <abbr class="slds-required" title="required">*</abbr>
		                                                    <apex:outputLabel value="Post" for="fldid" />
		                                                    <div class="slds-form-element__control">
		                                                        <apex:inputField Label="Post" value="{!jobroleIns.xcdhcm__Post_L__c}" id="fldid" required="true" >
                                                                    <apex:actionSupport event="onchange" action="{!defaultValueupdatefromCompJr}" rerender="theFrm" status="wait" />
		                                                            <!--                                                         <apex:actionStatus id="defaultStatus" startText="Please wait.........." />  -->
		                                                        </apex:inputField>
		                                                    </div>                                                                                        
		                                                </div>
		                                           	</div> 
												</apex:outputpanel>
	                                        </apex:actionRegion>
	                                    </apex:outputpanel>
                                   	</apex:pageBlockSectionItem>
                                   	
                                    <!-- START:: 16/08/2018 NPPD-1701 modified by Ranjeet -->
                                    <apex:repeat value="{!jobRoleDetail}" var="newRole" >
	                                   	<apex:pageBlockSectionItem >
                     		       		    <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                            <apex:outputpanel rendered="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Appointment_grade__c.Accessible}" >
                           			        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
	                                            <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
	                                                <div class="slds-form-element slds-p-around--small">                                                                                                     
	                                                    <apex:outputLabel value="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Appointment_grade__c.label}" for="appointmentGradeId" />
	                                                    <div class="slds-form-element__control">
	                                                        <apex:inputField Label="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Appointment_grade__c.label}" value="{!newRole.xcdhcm__Appointment_grade__c}" id="appointmentGradeId">
	                                                        </apex:inputField>
	                                                    </div>                                                                                        
	                                                </div>
	                                           	</div> 
		                                    </apex:outputpanel>
	                                    </apex:pageBlockSectionItem>
                                    </apex:repeat>
                                    <!-- END:: 16/08/2018 NPPD-1701 modified by Ranjeet -->
                                    
                                    <!-- START :: NPPD-1862 20/12/2018 Control Post field on Job role edit page via custom setting added by Ranjeet -->
                                    <apex:repeat value="{!jobRoleDetail}" var="newRole" >
                                    <!-- END :: NPPD-1862 20/12/2018 Control Post field on Job role edit page via custom setting modified by Ranjeet -->
                                    <apex:pageBlockSectionItem >
                                         <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                            <apex:outputpanel rendered="{!$objectType.xcdhcm__Job_Role__c.fields.xcdhcm__Appointment_grade__c.Accessible}" >
                           			        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                            <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
                                                <div class="slds-form-element slds-p-around--small">	                                                                                                 
                                                    <label class="slds-form-element__label" >
                                                        {!$objectType.Job_Role__c.fields.Appointment_date__c.Label}
                                                    </label> 
                                                    <div class="slds-form-element__control">
	                                                    	<!-- START :: NPPD-1862 20/12/2018 Control Post field on Job role edit page via custom setting modified by Ranjeet -->
	                                                        <apex:inputField value="{!newRole.xcdhcm__Appointment_date__c}"  />
	                                                        <!-- END :: NPPD-1862 20/12/2018 Control Post field on Job role edit page via custom setting modified by Ranjeet -->
                                                    </div>                                                                                        
                                                </div>
                                            </div> 
                                        </apex:outputpanel>
                                    </apex:pageBlockSectionItem>
	                                <!-- START :: NPPD-1862 20/12/2018 Control Post field on Job role edit page via custom setting added by Ranjeet -->
                                    </apex:repeat>
                                    <!-- END :: NPPD-1862 20/12/2018 Control Post field on Job role edit page via custom setting added by Ranjeet -->
                                </apex:pageBlockSection>
                               	
                               	<apex:repeat value="{!jobRoleDetail}" var="newRole" >
                                   	<apex:pageBlockSection title="{!$Label.xcdhcm__jobrole_edit_employeeinformation}" id="infoId"  columns="2" collapsible="false" >
                                       	<apex:repeat value="{!$ObjectType.xcdhcm__Job_Role__c.Fieldsets.xcdhcm__Job_role_information_Edit}" var="i">
                                             <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
		                                	<!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
                                            <!-- START:: 24/12/2018 NPPD-1819 FLS Not Affecting Edit Page Label modify by  Ranjeet-->
                                            <apex:outputpanel rendered="{!AND(($ObjectType.xcdhcm__Job_Role__c.fields[i].Accessible), IF(NOT(OR(CONTAINS(i, 'Employment_Status__c'), CONTAINS(i, 'Employment_Type__c'), CONTAINS(i, 'Pattern_Type__c'), CONTAINS(i, 'Work_Cycle__c'), CONTAINS(i, 'Working_Days__c'), CONTAINS(i, 'First_day_of_cycle_editable__c'))), TRUE, FALSE))}">
                                            <!-- END:: 24/12/2018 NPPD-1819 FLS Not Affecting Edit Page Label modify by  Ranjeet-->
		                                    <!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->                                                
                                             <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
		                                    <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
                                                   <div class="slds-form-element slds-p-around--small">                                                                                                  
                                                       <label class="slds-form-element__label" style="{!IF(i.label=='Blankspace','display:none;' ,'')}" >
                                                           <apex:outputPanel rendered="{!i.required}" ><abbr class="slds-required" title="required">*</abbr></apex:outputPanel>  
                                                           {!i.label}
                                                           <span class="LiteHelpText">
                                                               <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields[i].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
                                                               <span>{!$ObjectType.Job_Role__c.fields[i].inlineHelpText}</span>
                                                           </span>
                                                       </label>
                                                       <div class="slds-form-element__control">
                                                           <apex:inputField value="{!newRole[i]}"  required="{!i.required}" style="{!IF(i.label=='Blankspace','display:none;' ,'')}"/>
                                                       </div>                                                                                        
                                                   </div>
                                               </div> 
                                           </apex:outputpanel>
                                       </apex:repeat>
                                   </apex:pageBlockSection>
                                   
									<apex:pageBlockSection title="{!$Label.xcdhcm__jobrole_edit_employeeduration}" id="empDurationId"  columns="2" collapsible="false" >
									    <apex:repeat value="{!$ObjectType.xcdhcm__Job_Role__c.Fieldsets.xcdhcm__Job_Role_duration_Edit}" var="i">
          					               <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
											<!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
                                            <!-- START:: 24/12/2018 NPPD-1819 FLS Not Affecting Edit Page Label modify by  Ranjeet-->
                                            <apex:outputpanel rendered="{!AND(($ObjectType.xcdhcm__Job_Role__c.fields[i].Accessible), IF(NOT(OR(CONTAINS(i, 'Employment_Status__c'), CONTAINS(i, 'Employment_Type__c'), CONTAINS(i, 'Pattern_Type__c'), CONTAINS(i, 'Work_Cycle__c'), CONTAINS(i, 'Working_Days__c'), CONTAINS(i, 'First_day_of_cycle_editable__c'))), TRUE, FALSE))}">
                                            <!-- END:: 24/12/2018 NPPD-1819 FLS Not Affecting Edit Page Label modify by  Ranjeet-->
											<!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
         							        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
									      		<div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
									          		<div class="slds-form-element slds-p-around--small">                                                                                                  
									              		<label class="slds-form-element__label" style="{!IF(i.label=='Blankspace','display:none;' ,'')}" >
										                  	<apex:outputPanel rendered="{!i.required}" ><abbr class="slds-required" title="required">*</abbr></apex:outputPanel>  
										                  	{!i.label}
										                  	<span class="LiteHelpText">
										                      <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields[i].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
										                      <span>{!$ObjectType.Job_Role__c.fields[i].inlineHelpText}</span>
										                  	</span>
										              	</label>
									              		<div class="slds-form-element__control">
	                                                    	<!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
	                                                        <apex:actionRegion >
		                                                        <apex:inputField value="{!newRole[i]}"  required="{!i.required}" style="{!IF(i.label=='Blankspace','display:none;' ,'')}" rendered="{!CONTAINS(i, 'Start_Date__c')}">
		                                                        	<apex:actionSupport event="onchange" action="{!setFirstDayOfCycle}" rerender="firstDayOfCyclePanel,error" status="wait"/>
		                                                        </apex:inputField>
	                                                        </apex:actionRegion>
	                                                        <apex:inputField value="{!newRole[i]}"  required="{!i.required}" style="{!IF(i.label=='Blankspace','display:none;' ,'')}" rendered="{!NOT(CONTAINS(i, 'Start_Date__c'))}"/>
	                                                    	<!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
									                   	</div>                                                                                        
									               	</div>
									           	</div> 
									       </apex:outputpanel>
									   </apex:repeat>
									</apex:pageBlockSection>
                                   
                                   	<!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
									<apex:pageBlockSection title="{!$Label.xcdhcm__jobrole_edit_employeeworkinghours}" id="empWorkingHoursId"  columns="2" collapsible="false" >
  										<apex:pageBlockSectionItem >			
                                           <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                            <apex:outputpanel rendered="{!$ObjectType.xcdhcm__Job_Role__c.fields['Employment_Status__c'].Accessible}">
                			               <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
				                                <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
				                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
				                                        <label class="slds-form-element__label" >
				                                            <abbr class="slds-required" title="required">*</abbr>
				                                            {!$ObjectType.Job_Role__c.fields['Employment_Status__c'].Label}
				                                            <span class="LiteHelpText">
				                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields['Employment_Status__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
				                                                <span>{!$ObjectType.Job_Role__c.fields['Employment_Status__c'].inlineHelpText}</span>
				                                            </span>
				                                        </label> 
				                                        <div class="slds-form-element__control">
				                                        	<apex:inputField value="{!newRole['Employment_Status__c']}" required="true"/>
				                                        </div>                                                                                        
				                                    </div>
				                                </div> 
				                            </apex:outputpanel>
		                       			</apex:pageBlockSectionItem>
		                       			<apex:pageBlockSectionItem >
                                            <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                            <apex:outputpanel rendered="{!$ObjectType.xcdhcm__Job_Role__c.fields['Employment_Type__c'].Accessible}">
                			               <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
				                                <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
				                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
				                                        <label class="slds-form-element__label" >
				                                            <abbr class="slds-required" title="required">*</abbr>
				                                            {!$ObjectType.Job_Role__c.fields['Employment_Type__c'].Label}
				                                            <span class="LiteHelpText">
				                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields['Employment_Type__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
				                                                <span>{!$ObjectType.Job_Role__c.fields['Employment_Type__c'].inlineHelpText}</span>
				                                            </span>
				                                        </label> 
							<!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet-->				
				                                        <div class="slds-form-element__control">
			                                                <apex:inputField value="{!newRole['Employment_Type__c']}" required="true"/>
				                                        </div>                                                                                        
				                                    		<!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet-->
								    </div>
				                                </div> 
				                            </apex:outputpanel>
										</apex:pageBlockSectionItem>	
										<apex:pageBlockSectionItem >
                                            <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                            <apex:outputpanel rendered="{!$ObjectType.xcdhcm__Job_Role__c.fields['Pattern_Type__c'].Accessible}">
                			               <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
				                                <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
				                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
				                                        <label class="slds-form-element__label" >
				                                            <abbr class="slds-required" title="required">*</abbr>
				                                            {!$ObjectType.Job_Role__c.fields['Pattern_Type__c'].Label}
				                                            <span class="LiteHelpText">
				                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields['Pattern_Type__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
				                                                <span>{!$ObjectType.Job_Role__c.fields['Pattern_Type__c'].inlineHelpText}</span>
				                                            </span>
				                                        </label> 
				                                        <div class="slds-form-element__control">
				                                            <apex:actionRegion >
				                                                <apex:inputField value="{!newRole['Pattern_Type__c']}" required="true">
												<!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet-->
				                                                	<apex:actionSupport event="onchange" rerender="workCyclePanel, error" status="wait"/>
				                                                </apex:inputField>
				                                            </apex:actionRegion>
				                                        </div>                                                                                        
				                                    </div>
				                                </div> 
				                            </apex:outputpanel>
		                                </apex:pageBlockSectionItem>
										<apex:pageBlockSectionItem >
										<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                            <apex:outputPanel id="workCyclePanel" rendered="{!$ObjectType.xcdhcm__Job_Role__c.fields['Working_Days__c'].Accessible}">
                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
												<apex:outputpanel rendered="{!IF(NOT(AND( newRole['Pattern_Type__c'] = 'Flexible working days', newRole['Pattern_Type__c'] = 'Irregular shift pattern')),true,false)}" > 
													<apex:outputpanel rendered="{!IF(AND(newRole['Pattern_Type__c'] != 'Work cycle - days', newRole['Pattern_Type__c'] != 'Work cycle - hours', newRole['Pattern_Type__c'] != 'Flexible working days', newRole['Pattern_Type__c'] != 'Irregular shift pattern'),true,false)}" > 
														<div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
														    <div class="slds-form-element slds-p-around--small">                                                                                                     
														        <label class="slds-form-element__label" >
														            <abbr class="slds-required" title="required">*</abbr>
														            {!$ObjectType.Job_Role__c.fields['Working_Days__c'].Label}
														            <span class="LiteHelpText">
														                <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields['Working_Days__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
														                <span>{!$ObjectType.Job_Role__c.fields['Working_Days__c'].inlineHelpText}</span>
														            </span>
														        </label> 
														        <div class="slds-form-element__control">
														        	<apex:inputField id="JWorkingdays" value="{!newRole['Working_Days__c']}" required="true"/>
														        </div>
														    </div>
														</div> 
													</apex:outputpanel>
					
                    								<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                    								<!-- START:: 24/12/2018 NPPD-1819 FLS Not Affecting Edit Page Label modify by  Ranjeet--> 
                                                    <apex:outputpanel rendered="{!AND(($ObjectType.xcdhcm__Job_Role__c.fields['Work_Cycle__c'].Accessible), IF(OR(newRole['Pattern_Type__c'] = 'Work cycle - days', newRole['Pattern_Type__c'] = 'Work cycle - hours'),true,false))}" > 
                                      				<!-- END:: 24/12/2018 NPPD-1819 FLS Not Affecting Edit Page Label modify by  Ranjeet-->
                                      				<!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
														<div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
														    <div class="slds-form-element slds-p-around--small">                                                                                                     
														        <label class="slds-form-element__label" >
														            <abbr class="slds-required" title="required">*</abbr>
														            {!$ObjectType.Job_Role__c.fields['Work_Cycle__c'].Label}
														            <span class="LiteHelpText">
														                <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields['Work_Cycle__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
														                <span>{!$ObjectType.Job_Role__c.fields['Work_Cycle__c'].inlineHelpText}</span>
														            </span>
														        </label> 
														        <div class="slds-form-element__control">
						                                        	<apex:actionRegion >
						                                                <apex:inputField id="workCycle" value="{!newRole['Work_Cycle__c']}" required="true">
						                                                	<!-- START :: NPPD-1720 11/09/2018  Modified by Ranjeet -->
				    	                                                	<apex:actionSupport event="onselect" action="{!setFirstDayOfCycle}"  rerender="firstDayOfCyclePanel,error"  status="wait" />
						                                                	<!-- END :: NPPD-1720 11/09/2018  Modified by Ranjeet -->
						                                                </apex:inputField>
					                                                </apex:actionRegion>
														        </div>
														    </div>
														</div> 
													</apex:outputpanel>

													<apex:outputpanel id="firstDayOfCyclePanel">
													<!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet-->
                                                    <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                                    	<!-- START:: 24/12/2018 NPPD-1819 FLS Not Affecting Edit Page Label modify by  Ranjeet--> 
						        						<apex:outputpanel id="first-day-of-cycle-panel" rendered="{!AND(($ObjectType.xcdhcm__Job_Role__c.fields['First_day_of_cycle_editable__c'].Accessible), IF(OR(newRole['Pattern_Type__c'] = 'Work cycle - days', newRole['Pattern_Type__c'] = 'Work cycle - hours'),true,false))}" > 
                                                        <!-- END:: 24/12/2018 NPPD-1819 FLS Not Affecting Edit Page Label modify by  Ranjeet-->
                                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
															<div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
															    <div class="slds-form-element slds-p-around--small">                                                                                                     
															        <label class="slds-form-element__label" >
															            {!$ObjectType.Job_Role__c.fields['First_day_of_cycle_editable__c'].Label}
															            <span class="LiteHelpText">
															                <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields['First_day_of_cycle_editable__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
															                <span>{!$ObjectType.Job_Role__c.fields['First_day_of_cycle_editable__c'].inlineHelpText}</span>
															            </span>
															        </label> 
															        <div class="slds-form-element__control">
						                                                <apex:inputField id="first-day-of-cycle" value="{!newRole['First_day_of_cycle_editable__c']}"/>
															        </div>
															    </div>
															</div> 
														</apex:outputpanel>
													</apex:outputpanel>
													
												</apex:outputpanel>	                                	
		                                    </apex:outputPanel> 
		                                </apex:pageBlockSectionItem>                                        
                                       
                                       	<apex:repeat value="{!$ObjectType.xcdhcm__Job_Role__c.Fieldsets.xcdhcm__Job_Role_Working_Hours_Edit}" var="i">
                                        <!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
                                        	<!-- START:: 24/12/2018 NPPD-1819 FLS Not Affecting Edit Page Label modify by  Ranjeet--> 
					    					<apex:outputpanel rendered="{!AND(($ObjectType.xcdhcm__Job_Role__c.fields[i].Accessible), IF(NOT(OR(CONTAINS(i, 'Employment_Status__c'), CONTAINS(i, 'Employment_Type__c'), CONTAINS(i, 'Pattern_Type__c'), CONTAINS(i, 'Work_Cycle__c'), CONTAINS(i, 'Working_Days__c'), CONTAINS(i, 'First_day_of_cycle_editable__c'))), TRUE, FALSE))}">
                                        	<!-- END:: 24/12/2018 NPPD-1819 FLS Not Affecting Edit Page Label modify by  Ranjeet-->
                                        <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata--> 
					       <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
												<div class="slds-form-element slds-p-around--small">                                                                                                  
	                                                <label class="slds-form-element__label" style="{!IF(i.label=='Blankspace','display:none;' ,'')}" >
	                                                    <apex:outputPanel rendered="{!i.required}" ><abbr class="slds-required" title="required">*</abbr></apex:outputPanel>  
	                                                    {!i.label}
	                                                    <span class="LiteHelpText">
	                                                        <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields[i].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
	                                                        <span>{!$ObjectType.Job_Role__c.fields[i].inlineHelpText}</span>
	                                                    </span>
	                                                </label>
	                                                <div class="slds-form-element__control">
	                                                	<apex:outputPanel rendered="{!IF(NOT(OR(CONTAINS(i, 'Working_Days_Week__c'), CONTAINS(i, 'Contractual_Hours__c'))), TRUE, FALSE)}">
	                                                    	<apex:inputField value="{!newRole[i]}"  required="{!i.required}" style="{!IF(i.label=='Blankspace','display:none;' ,'')}"/>
	                                                	</apex:outputPanel>
	           											<apex:outputPanel rendered="{!IF(OR(CONTAINS(i, 'Working_Days_Week__c'), CONTAINS(i, 'Contractual_Hours__c')), TRUE, FALSE)}">
				                                        	<!-- START :: NPPD-1162 12/04/2018  Modified by Ranjeet -->
				                                            <apex:inputField value="{!newRole[i]}" onchange="setParams('{!i}', this.value);" required="true"/>
		                                                	<!-- END :: NPPD-1162 12/04/2018  Modified by Ranjeet -->
		                                                </apex:outputPanel>                                     	
	                                                </div>                                                                                        
												</div>
											</div> 
										</apex:outputpanel>
									</apex:repeat>
								</apex:pageBlockSection>
				                
                                 <!-- START :: NPPD-1853 22/12/2018 Job Role Field Sets - Tidy Up added by Namrata -->
								<apex:pageBlockSection title="{!$Label.xcdhcm__clonejbrole_seniority_entitlement}"
									collapsible="false">
									<apex:repeat value="{!$ObjectType.xcdhcm__Job_Role__c.Fieldsets.xcdhcm__Seniority_and_leave_entitlement}"
										var="n">
										<apex:outputpanel rendered="{!$ObjectType.xcdhcm__Job_Role__c.fields[n].Accessible}">
											<div
												class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
												<div class="slds-form-element slds-p-around--small">
													<label class="slds-form-element__label"
														style="IF (n.label=='Blankspace','display: none;' ,'')}">
														<apex:outputPanel rendered="{!n.required}">
															<abbr class="slds-required" title="required">*</abbr>
														</apex:outputPanel> {!n.label} <span class="LiteHelpText"> <apex:image rendered="{!NOT(ISNULL($ObjectType.xcdhcm__Job_Role__c.fields[n].inlineHelpText))}"
																value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}" />
															<span>{!$ObjectType.Job_Role__c.fields[n].inlineHelpText}</span>
													</span>
													</label>
													<div class="slds-form-element__control">
														<apex:inputField value="{!newRole[n]}"
															required="{!n.required}"
															style="{!IF(n.label=='Blankspace','display:none;' ,'')}" />
													</div>
												</div>
											</div>
										</apex:outputpanel>
									</apex:repeat>
								</apex:pageBlockSection>
			     			<!-- END :: NPPD-1853 22/12/2018 Job Role Field Sets - Tidy Up added by Namrata -->
					                <!-- START :: 01-09-2017 Summer2017Patch NPPD-1516 Joiner Process - Data Security Added by Rahul S -->       
					                <apex:actionRegion >
					                    <apex:pageBlockSection title="{!$Label.xcdhcm__clonejbrole_extended_permission}" id="extendedSharingId"  columns="2" rendered="{!if(($User.Id != empDetail.xcdhcm__User__c),true,false)}" >      
					                <!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet -->
							        <apex:outputpanel >
				                            <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
				                                <div class="slds-form-element slds-p-around--small">                                                                                                  
				                                    <label class="slds-form-element__label">
				                                        <abbr class="slds-required" title="required">*</abbr>
				                                        {!$Label.xcdhcm__clonejbrolesextendedpermissionsiprofile} 
				                                    </label>
				                                    <div class="slds-form-element__control">
					                                        <!-- START :: 19-09-2018 NPPD-1674 P1 Summer2018 Hybrid Joiner Process Modified by Rahul S -->
					                                        <apex:selectList label="{!$Label.xcdhcm__clonejbrolesextendedpermissionsiprofile}" id="profilePicklist" value="{!ProfileId}" size="1" required="true" style="width:177px!important;" tabindex="10">  
					                                         <!-- END :: 19-09-2018 NPPD-1674 P1 Summer2018 Hybrid Joiner Process Modified by Rahul S -->
				                                            <apex:selectOptions value="{!ProfileOptions}"/>  
				                                        </apex:selectList> 
				                                    </div>                                                                                        
				                                </div>
				                            </div> 
				                        </apex:outputpanel>
				                                            
				                        <apex:outputpanel rendered="{!AND(ShowPermissionSetField, userActive=true)}">
				                            <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
				                                <div class="slds-form-element slds-p-around--small" style="width:200%">                                                                                                  
				                                    <label class="slds-form-element__label" > 
				                                        {!$Label.CloneJBRoleSExtendedPermissionSIPermissionset} 
				                                    </label>
				                                    <div class="slds-form-element__control">
				                                        <c:MultiselectPicklist leftOption="{!deSelectedPermissionSet}" rightOption="{!selectedPermissionSet}" size="5" width="150px"/>
				                                    </div>                                                                                        
				                                </div>
				                            </div> 
				                        </apex:outputpanel> 
				                         
				                        <apex:outputpanel rendered="{!ShowPublicGroupField}">
				                            <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
				                                <div class="slds-form-element slds-p-around--small" style="width:200%">                                                                                                  
				                                    <label class="slds-form-element__label" > 
				                                        {!$Label.CloneJBRoleSExtendedPermissionSIAssigntopublicgroups} 
				                                    </label>
				                                    <div class="slds-form-element__control">
				                                        <c:MultiselectPicklist leftOption="{!deSelectedPublicGroupSet}" rightOption="{!selectedPublicGroupSet}" size="5" width="150px"/>
				                                    </div>                                                                                        
				                                </div>
				                            </div> 
				                        </apex:outputpanel>  
				                                    
				                    </apex:pageBlockSection>
				                </apex:actionRegion>
				                <!-- END :: 01-09-2017 Summer2017Patch NPPD-1516 Joiner Process - Data Security Added by Rahul S -->         
                                <!-- START :: NPPD-1853 22/12/2018 Job Role Field Sets - Tidy Up commented by Namrata -->       
                                    <!-- START :: NPPD-1162 12/04/2018 Add new section Seniority Entitlement on Change job role page Added by Ranjeet                                
	                                <apex:pageBlockSection title="{!$Label.xcdhcm__clonejbrole_seniority_entitlement}" id="seniorityEntitlementId" collapsible="false" >
										<apex:pageBlockSectionItem >			
											<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata             
                                            <apex:outputpanel rendered="{!$ObjectType.Job_Role__c.fields['Additional_Leave_for_Job_Role_Seniority__c'].Accessible}" >
                                        	<!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata
							        <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
				                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
				                                        <label class="slds-form-element__label" >
				                                            {!$ObjectType.Job_Role__c.fields['Additional_Leave_for_Job_Role_Seniority__c'].Label}
				                                            <span class="LiteHelpText">
				                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.Job_Role__c.fields['Additional_Leave_for_Job_Role_Seniority__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
				                                                <span>{!$ObjectType.Job_Role__c.fields['Additional_Leave_for_Job_Role_Seniority__c'].inlineHelpText}</span>
				                                            </span>
				                                        </label> 
				                                        <div class="slds-form-element__control">
				                                        	<apex:inputField value="{!newRole['Additional_Leave_for_Job_Role_Seniority__c']}"/>
				                                        </div>                                                                                        
				                                    </div>
				                                </div> 
				                            </apex:outputpanel>
		                       			</apex:pageBlockSectionItem>
										<apex:pageBlockSectionItem >			
											<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata        
                                            <apex:outputpanel rendered="{!$ObjectType.Job_Role__c.fields['Seniority_status__c'].Accessible}">
                                        	<!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata 
								<div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
				                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
				                                        <label class="slds-form-element__label" >
				                                            {!$ObjectType.Job_Role__c.fields['Seniority_status__c'].Label}
				                                            <span class="LiteHelpText">
				                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.Job_Role__c.fields['Seniority_status__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
				                                                <span>{!$ObjectType.Job_Role__c.fields['Seniority_status__c'].inlineHelpText}</span>
				                                            </span>
				                                        </label> 
				                                        <div class="slds-form-element__control">
				                                        	<apex:inputField value="{!newRole['Seniority_status__c']}"/>
				                                        </div>                                                                                        
				                                    </div>
				                                </div> 
				                            </apex:outputpanel>
		                       			</apex:pageBlockSectionItem>
										<apex:pageBlockSectionItem >			
											<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata         
                                            <apex:outputpanel rendered="{!$ObjectType.Job_Role__c.fields['Additional_Contractual_Leave_Entitlement__c'].Accessible}">
                                        	<!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata 
							        <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
				                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
				                                        <label class="slds-form-element__label" >
				                                            {!$ObjectType.Job_Role__c.fields['Additional_Contractual_Leave_Entitlement__c'].Label}
				                                            <span class="LiteHelpText">
				                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.Job_Role__c.fields['Additional_Contractual_Leave_Entitlement__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
				                                                <span>{!$ObjectType.Job_Role__c.fields['Additional_Contractual_Leave_Entitlement__c'].inlineHelpText}</span>
				                                            </span>
				                                        </label> 
				                                        <div class="slds-form-element__control">
				                                        	<apex:inputField value="{!newRole['Additional_Contractual_Leave_Entitlement__c']}"/>
				                                        </div>                                                                                        
				                                    </div>
				                                </div> 
				                            </apex:outputpanel>
		                       			</apex:pageBlockSectionItem>
										<apex:pageBlockSectionItem >			
											<!-- START:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata             
                                            <apex:outputpanel rendered="{!$ObjectType.Job_Role__c.fields['Entitlement_notes__c'].Accessible}">
                                            <!-- END:: 12/11/2018 NPPD-1770 hotfix for FLS issue modify by  Namrata
							        <div class="slds-col slds-size--1-of-1 slds-small-size--6-of-12">
				                                    <div class="slds-form-element slds-p-around--small">                                                                                                     
				                                        <label class="slds-form-element__label" >
				                                            {!$ObjectType.Job_Role__c.fields['Entitlement_notes__c'].Label}
				                                            <span class="LiteHelpText">
				                                                <apex:image rendered="{!NOT(ISNULL($ObjectType.Job_Role__c.fields['Entitlement_notes__c'].inlineHelpText))}" value="{!URLFOR($Resource.xcdhcm__XCD_static_resources,'Css/Lite/Lhelp.png')}"/>
				                                                <span>{!$ObjectType.Job_Role__c.fields['Entitlement_notes__c'].inlineHelpText}</span>
				                                            </span>
				                                        </label> 
				                                        <div class="slds-form-element__control">
				                                        	<apex:inputField value="{!newRole['Entitlement_notes__c']}"/>
				                                        </div>                                                                                        
				                                    </div>
				                                </div> 
				                            </apex:outputpanel>
		                       			</apex:pageBlockSectionItem>
	                                </apex:pageBlockSection>   
                                     END :: NPPD-1162 12/04/2018 Add new section Seniority Entitlement on Change job role page Added by Ranjeet -->                                
                                    <!-- END :: NPPD-1853 22/12/2018 Job Role Field Sets - Tidy Up commented by Namrata -->       
			       </apex:repeat>  

                                <!-- START :: NPPD-1162 12/04/2018 Work cycle related validation error messages Added by Ranjeet -->
	                            <apex:outputPanel id="popup">
	                                <apex:outputPanel rendered="{!(displayJobRolePopup)}">
	                                    <apex:outputPanel styleClass="popupBg"/>
	                                    <apex:outputPanel id="popup1" styleClass="customPopup" layout="block" >
	                                        <center>
	                                            <apex:outputtext id="oText2" value="{!popupMsg}"/>
	                                        </center>
	                                        <apex:outputPanel > 
	                                            <apex:actionStatus id="saveStatus1">                   
	                                                <apex:facet name="stop">
	                                                    <apex:outputPanel > 
	                                                        <apex:commandButton value="{!$Label.xcdhcm__new_job_rolebcancel}" styleclass="slds-button slds-button--neutral" action="{!cancelJobrole}"  rerender="popup" status="saveStatus1" />
	                                                        <apex:commandButton value="{!$Label.xcdhcm__clonejbrolebok}" styleclass="slds-button slds-button--neutral" action="{!saveJobRoleDetail}" rendered="{!showSaveAndNewCompensationTrue = FALSE}"  rerender="error, popup"  status="saveStatus1" />
	                                                        <apex:commandButton value="{!$Label.xcdhcm__clonejbrolebok}" styleclass="slds-button slds-button--neutral" action="{!saveJobRoleAndNewCopm}" rendered="{!AND(SaveandCompBtn, showSaveAndNewCompensationTrue)}"  rerender="error, popup" status="saveStatus1"/>
	                                                    </apex:outputPanel> 
	                                                </apex:facet>
	                                                <apex:facet name="start">
	                                                    <apex:outputPanel >
	                                                        <div class="slds-spinner_container slds-show " >
	                                                            <div class="slds-spinner--brand slds-spinner slds-spinner--medium" aria-hidden="false" role="alert">
	                                                                <div class="slds-spinner__dot-a"></div>
	                                                                <div class="slds-spinner__dot-b"></div>
	                                                            </div>
	                                                        </div>
	                                                    </apex:outputPanel>                        
	                                                </apex:facet>                                
	                                            </apex:actionStatus> 
	                                        </apex:outputPanel>
	                                    </apex:outputPanel>
	                                </apex:outputPanel>
	                            </apex:outputPanel>                                
                            	<!-- END :: NPPD-1162 12/04/2018 Work cycle related validation error messages Added by Ranjeet -->
                                
                            </apex:pageBlock>   
                            <!-- ================================== Page content  ==========================================================    -->
                        </div>
                        <div class="slds-modal__footer">
                            <apex:actionStatus id="saveStatus">                   
                                <apex:facet name="stop">
                                    <apex:outputPanel >
                                    	<!-- START :: NPPD-1162 12/04/2018 Work cycle related validation error messages Modified by Ranjeet -->
                                        <apex:commandButton immediate="true" action="{!cancelJobrole}" rerender="btnsB" value="{!$Label.xcdhcm__new_job_rolebcancel}" styleclass="slds-button slds-button--neutral" status="saveStatus"/>
                                        <apex:commandButton id="btnsB" action="{!confirmNewJobRoleRequest}" rerender="error, popup, btnsB" value="{!$Label.xcdhcm__new_job_rolebsave}" styleclass="slds-button slds-button--neutral" status="saveStatus" rendered="{!SaveandCompBtn!=true}"/>
                                        <apex:commandButton id="btns2B" action="{!confirmJobRoleAndNewCompRequest}" rerender="error, popup, btns2B, btnsB" value="{!$Label.xcdhcm__new_job_rolebsaveandnewcompensation}" styleclass="slds-button slds-button--neutral" status="saveStatus" rendered="{!SaveandCompBtn=true}"/>
                                        <apex:commandButton id="btns1B" action="{!confirmNewJobRoleRequest}" rerender="error, popup, btns1B, btnsB" value="{!$Label.xcdhcm__new_job_rolebsave}" styleclass="slds-button slds-button--brand" status="saveStatus" rendered="{!SaveandCompBtn=true}"/> 
                                    	<!-- END :: NPPD-1162 12/04/2018 Work cycle related validation error messages Modified by Ranjeet -->
                                    </apex:outputPanel>
                                </apex:facet>
                                <apex:facet name="start">
                                    <div class="slds-spinner_container slds-show" style="top:10%; bottom:9%">
                                        <div class="slds-spinner--brand slds-spinner slds-spinner--medium" aria-hidden="false" role="alert">
                                            <div class="slds-spinner__dot-a"></div>
                                            <div class="slds-spinner__dot-b"></div>
                                        </div> 
                                    </div>                    
                                </apex:facet>                                
                            </apex:actionStatus> 
                        </div>
                    </div>
                </div>
                <div class="slds-backdrop slds-backdrop--open"></div>
            </apex:form> 
    <!-- START :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet-->
	<script type="text/javascript"> 
		var contractualHrs = 0;
		var workingDaysperWeek = "{!JSENCODE(workingDaysperWeek)}";
		
		function setParams(param, val)
		{
			// set the param property
			if(param == 'Contractual_Hours__c')
			{
				contractualHrs = val;
			}
			else
			{
				workingDaysperWeek = val;
			}
			//var q = queryString.parse(location.search);
			//q.contractualHrs = val;
			
			//convert the object to a query string
			//and overwrite the existing query string
			//location.search = queryString.stringify(q);	
		}
		
		function openLookup(baseURL, width, modified, searchParam)
		{
			var originalbaseURL = baseURL;
			var originalwidth = width;
			var originalmodified = modified;
			var originalsearchParam = searchParam;
			var lookupType = baseURL.substr(baseURL.length-3, 3);
			
			if (modified == '1') 
			{
				baseURL = baseURL + searchParam;
			}

			var isCustomLookup = false;

			// Following "a0t" is the lookup type for Work_cycle__c object so change this as per your standard or custom object
			if(lookupType == '{!workCyclePrefixVal}')
			{
				var urlArr = baseURL.split("&");
				var txtId = '';
				if(urlArr.length > 2) 
				{
					urlArr = urlArr[1].split('=');
					txtId = urlArr[1];
				}

				// Following is the url of Custom Lookup page. You need to change that accordingly
				baseURL = "/apex/xcdhcm__CustomWorkCycleLookup?txt=" + txtId;

				// Following is the id of apex:form control "theForm". You need to change that accordingly
				baseURL = baseURL + "&frm=" + escapeUTF("{!$Component.theForm}");
				if (modified == '1') 
				{
					baseURL = baseURL + "&lksearch=" + searchParam;
				}

				// Following is the ID of inputField that is the lookup to be customized as custom lookup
				if(txtId.indexOf('workCycle') > -1 )
				{				
					isCustomLookup = true;
				}
				if(contractualHrs != undefined)
				{
					baseURL += "&contractual_hrs=" + escapeUTF(contractualHrs);
				}
				if(workingDaysperWeek != undefined)
				{
					baseURL += "&working_days_per_week=" + escapeUTF(workingDaysperWeek);
				}
			}

			if(isCustomLookup == true)
			{
				openPopup(baseURL, "lookup", 350, 480, "width="+width+",height=480,toolbar=no,status=no,directories=no,menubar=no,resizable=yes,scrollable=no", true);
			}
			else 
			{
				if (modified == '1') 
				{
					originalbaseURL = originalbaseURL + originalsearchParam;
				}
				openPopup(originalbaseURL, "lookup", 350, 480, "width="+originalwidth+",height=480,toolbar=no,status=no,directories=no,menubar=no,resizable=yes,scrollable=no", true);
			} 
		}
	</script>            
    <!-- END :: NPPD-1162 12/04/2018 Toggle showing of Work cycle and Working days fields based on Pattern type selected  Modified by Ranjeet-->
        
        </body>
    </html>
</apex:page>